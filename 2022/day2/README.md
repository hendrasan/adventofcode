My code is quite simple but convoluted at the same time?

Spent a lot of time to parse the input because in Windows each line has extra '\r' in the end that messes up with the code.
